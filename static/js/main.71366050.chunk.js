(this["webpackJsonpnatural-cosmetics"]=this["webpackJsonpnatural-cosmetics"]||[]).push([[0],{37:function(e,t,c){},45:function(e,t,c){},51:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},80:function(e,t,c){"use strict";c.r(t);var a=c(3),n=c.n(a),r=c(38),i=c.n(r),s=c(18),o=c(14),l=c(10),j=(c(45),c(12)),d=c(2);var u=function(e){var t=e.prod;return Object(d.jsxs)("div",{className:"item",children:[Object(d.jsx)("p",{className:"prodName",children:t.name}),Object(d.jsxs)("p",{children:["Precio por unidad:$",t.price]}),Object(d.jsxs)("p",{children:["Stock disponible: ",t.stock]}),Object(d.jsx)("img",{src:t.pictureURL,alt:"Imagen del producto: ".concat(t.name)}),Object(d.jsx)(j.b,{to:"/detail/".concat(t.id),children:Object(d.jsx)("button",{className:"details",children:"Informaci\xf3n adicional"})})]})};var b=function(e){return e.product.map((function(e){return Object(d.jsx)(u,{prod:e},e.id)}))},m=(c(51),c(30)),p=(c(34),m.a.initializeApp({apiKey:"AIzaSyDkghQTxKhzQzjSQh57ATsI-1BHrtfCWIE",authDomain:"natural-cosmetics-56970.firebaseapp.com",projectId:"natural-cosmetics-56970",storageBucket:"natural-cosmetics-56970.appspot.com",messagingSenderId:"414395105923",appId:"1:414395105923:web:12faaabc07fad957ed91b6"}));function O(){return m.a.firestore(p)}var h=c(26),f=c.n(h);c(37);var x=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1],r=Object(l.f)().idCategory,i=Object(a.useState)(!0),j=Object(o.a)(i,2),u=j[0],m=j[1];return Object(a.useEffect)((function(){var e=O().collection("items").get();m(!0),setTimeout((function(){r?e.then((function(e){n(e.docs.map((function(e){return Object(s.a)({id:e.id},e.data())})).filter((function(e){return e.category===r})))})).catch((function(e){return alert("Error:",e)})).finally((function(){m(!1)})):e.then((function(e){n(e.docs.map((function(e){return Object(s.a)({id:e.id},e.data())})))})).catch((function(e){return alert("Error:",e)})).finally((function(){m(!1)}))}),2e3)}),[r]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h1",{children:r?"".concat(r):"Productos"}),u?Object(d.jsx)(f.a,{type:"BallTriangle",color:"#00BFFF",className:"loader",height:100,width:100,visible:u}):Object(d.jsx)("div",{className:"itemContainer",children:Object(d.jsx)(b,{product:c})})]})},v=(c(70),c(71),c(22)),N=Object(a.createContext)(),g=function(){return Object(a.useContext)(N)},y=function(e){var t=e.children,c=Object(a.useState)([]),n=Object(o.a)(c,2),r=n[0],i=n[1];var s=0;for(var l in r)s+=r[l].quantity;return Object(d.jsx)(N.Provider,{value:{cartList:r,addToCart:function(e){var t=r.findIndex((function(t){return t.props.id===e.props.id}));if(t>-1){var c=r[t].quantity+e.quantity;c<e.props.stock?(e.quantity=c,r.splice(t,1),i([].concat(Object(v.a)(r),[e]))):alert("La cantidad seleccionada supera el stock disponible del producto")}else i([].concat(Object(v.a)(r),[e]))},deleteFromCart:function(e){var t=r.findIndex((function(t){return t.props.id===e}));r.splice(t,1),i(Object(v.a)(r))},clearItems:function(){r.splice(0),i(Object(v.a)(r))},totalQuantity:s},children:t})};var C=function(){var e=g().totalQuantity;return Object(d.jsxs)("button",{className:"cartWidget",children:[Object(d.jsx)("i",{className:"fas fa-shopping-cart"}),Object(d.jsx)("span",{className:"totalQuantity",children:"".concat(e)})]})};var k=function(){return Object(d.jsxs)("div",{className:"navbar",children:[Object(d.jsx)(j.b,{to:"/",children:"Natural cosmetics"}),Object(d.jsx)(j.b,{to:"/",children:"Productos"}),Object(d.jsx)(j.b,{to:"/category/Shampoo",children:"Shampoo"}),Object(d.jsx)(j.b,{to:"/category/Cuidado personal",children:"Cuidado personal"}),Object(d.jsx)(j.b,{to:"/category/Limpieza",children:"Limpieza"}),Object(d.jsx)(j.b,{to:"/cart",children:Object(d.jsx)(C,{})}),Object(d.jsx)("a",{className:"signIn",href:"/signIn",children:"Iniciar sesi\xf3n"})]})};c(72);var I=function(e){var t=e.stock,c=e.onAdd,n=e.initial,r=Object(a.useState)(n),i=Object(o.a)(r,2),s=i[0],l=i[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"itemCount",children:[Object(d.jsx)("button",{onClick:function(){s>1&&l(s-1)},className:1===s?"counterButton counterButtonRed":"counterButton",children:Object(d.jsx)("i",{className:"fas fa-minus"})}),Object(d.jsx)("span",{className:"counter",children:s}),Object(d.jsx)("button",{onClick:function(){s<t&&l(s+1)},className:s===t?"counterButton counterButtonRed":"counterButton",children:Object(d.jsx)("i",{className:"fas fa-plus"})})]}),Object(d.jsx)("button",{className:"onAdd",onClick:function(){return c(s)},children:"Agregar al carrito"})]})};c(73);var S=function(e){var t=e.props,c=Object(a.useState)(1),n=Object(o.a)(c,2),r=n[0],i=n[1],s=Object(a.useState)(!1),l=Object(o.a)(s,2),u=l[0],b=l[1],m=g().addToCart;return Object(d.jsxs)("div",{className:"itemDetail",children:[Object(d.jsx)("img",{className:"itemDetail_img",src:t.pictureURL,alt:"Imagen del producto: ".concat(t.name)}),Object(d.jsx)("p",{className:"itemDetail_name",children:t.name}),Object(d.jsx)("p",{className:"itemDetail_category",children:t.category}),Object(d.jsxs)("p",{className:"itemDetail_price",children:["$",t.price]}),Object(d.jsx)("p",{className:"itemDetail_detail",children:t.detail}),Object(d.jsxs)("div",{className:"itemDetail_count",children:[u?Object(d.jsx)(j.b,{to:"/cart",children:Object(d.jsx)("button",{className:"btnToCart",children:"Continuar la compra"})}):Object(d.jsx)(I,{stock:t.stock,onAdd:function(e){i(e),b(!0),m({props:t,quantity:e})},initial:r}),Object(d.jsx)(j.b,{to:"/category/".concat(t.category),children:Object(d.jsx)("button",{className:"btnBack",children:"Volver"})})]})]})};var D=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),c=t[0],n=t[1],r=Object(l.f)().id,i=Object(a.useState)(!0),j=Object(o.a)(i,2),u=j[0],b=j[1];return Object(a.useEffect)((function(){var e=O().collection("items").doc(r).get();setTimeout((function(){r&&e.then((function(e){n(Object(s.a)({id:e.id},e.data()))})).catch((function(e){return alert("Error:",e)})).finally((function(){b(!1)}))}),1500)}),[r]),Object(d.jsx)(d.Fragment,{children:u?Object(d.jsx)(f.a,{type:"BallTriangle",color:"#00BFFF",className:"loader",height:100,width:100,visible:u}):Object(d.jsx)(S,{props:c})})},B=c(24),F=(c(74),c(32));var q=function(){var e=g(),t=e.cartList,c=e.deleteFromCart,n=e.clearItems,r=Object(a.useState)({name:"",phone:"",email:""}),i=Object(o.a)(r,2),l=i[0],u=i[1],b=Object(a.useState)(!1),m=Object(o.a)(b,2),p=m[0],h=m[1],f=Object(a.useState)(),x=Object(o.a)(f,2),v=x[0],N=x[1],y=function(){return t.reduce((function(e,t){return e+t.quantity*parseInt(t.props.price)}),0)};return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"cartContainer",children:[Object(d.jsx)("h2",{children:"Detalle de tu compra"}),Object(d.jsxs)("ul",{className:"responsive-table",children:[Object(d.jsxs)("li",{className:"table-header",children:[Object(d.jsx)("div",{className:"col col-1",children:"Producto"}),Object(d.jsx)("div",{className:"col col-2",children:"Cantidad"}),Object(d.jsx)("div",{className:"col col-3",children:"Precio unitario"}),Object(d.jsx)("div",{className:"col col-4"})]}),t.map((function(e){return Object(d.jsxs)("li",{className:"table-row",children:[Object(d.jsx)("div",{className:"col col-1","data-label":"name",children:e.props.name}),Object(d.jsx)("div",{className:"col col-2","data-label":"quantity",children:e.quantity}),Object(d.jsxs)("div",{className:"col col-3","data-label":"price",children:["$",e.props.price]}),Object(d.jsx)("div",{className:"btnDelete col col-4",children:Object(d.jsx)("button",{className:"btnDelete",title:"Eliminar item",onClick:function(){return c(e.props.id)},children:Object(d.jsx)("i",{className:"fas fa-minus-circle"})})})]},e.props.id)})),Object(d.jsxs)("li",{className:"table-row",children:[Object(d.jsx)("button",{className:"btnClear",title:"Vaciar carrito",onClick:function(){return n()},children:Object(d.jsx)("i",{className:"far fa-trash-alt"})})," ",p?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{children:["Tu orden de compra es: ",v]}),Object(d.jsx)(j.b,{to:"/",children:Object(d.jsx)("button",{onClick:function(){h(!1)},children:"Ver m\xe1s productos"})}),Object(d.jsx)("p",{})]}):Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h(!0);var c={};c.date=F.a.firestore.Timestamp.fromDate(new Date),c.buyer=l,c.total=y(),c.items=t.map((function(e){return{id:e.props.id,name:e.props.name,price:e.quantity*parseInt(e.props.price),quantity:e.quantity}}));var a=O();a.collection("orders").add(c).then((function(e){var t=e.id;return N(t)})).catch((function(e){return alert("Error:",e)})).finally((function(){return u({name:"",phone:"",email:""})}));var r=a.collection("items").where(F.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.props.id}))),i=a.batch();r.get().then((function(e){e.docs.forEach((function(e){i.update(e.ref,{stock:e.data().stock-t.find((function(t){return t.props.id===e.id})).quantity})})),i.commit(),n()}))},onChange:function(e){u(Object(s.a)(Object(s.a)({},l),{},Object(B.a)({},e.target.name,e.target.value)))},children:[Object(d.jsx)("input",{type:"text",name:"name",placeholder:"Nombre",value:l.name}),Object(d.jsx)("input",{type:"text",name:"phone",placeholder:"N\xb0 Celular",value:l.phone}),Object(d.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:l.email}),Object(d.jsxs)("div",{children:["Total: $",y()]}),Object(d.jsx)("button",{children:"Comprar"})]})]})]})]})})};var T=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(y,{children:Object(d.jsxs)(j.a,{children:[Object(d.jsx)("header",{className:"App-header",children:Object(d.jsx)(k,{})}),Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{exact:!0,path:"/",children:Object(d.jsx)(x,{})}),Object(d.jsx)(l.a,{exact:!0,path:"/category/:idCategory",component:x}),Object(d.jsx)(l.a,{exact:!0,path:"/detail/:id",component:D}),Object(d.jsx)(l.a,{exact:!0,path:"/cart",component:q})]})]})})})};i.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(T,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.71366050.chunk.js.map